# Requests Library Documentation Scraper Configuration
# Medium documentation site (~50-80 pages) - standard ReadTheDocs pattern

# Project metadata
name: requests-docs
description: Python Requests library documentation scraper

# Site configuration
site:
  # Starting URL for the crawl
  start_urls:
    - https://docs.python-requests.org/en/latest/

  # Allowed domains
  allowed_domains:
    - docs.python-requests.org

# Crawling rules and behavior
crawling:
  # Only follow links in the latest version
  include_patterns:
    - pattern: "/en/latest/"
      type: prefix

  # Exclude other versions and search pages
  exclude_patterns:
    - pattern: "/en/master/"
      type: prefix
    - pattern: "/en/v2."
      type: prefix
    - pattern: "/en/stable/"
      type: prefix
    - pattern: "/_static/"
      type: prefix
    - pattern: "/_sources/"
      type: prefix
    - pattern: "/search/"
      type: prefix
    - pattern: "/genindex/"
      type: prefix
    - pattern: "*.pdf"
      type: glob
    - pattern: "*.zip"
      type: glob

  # No depth limit (crawl entire doc tree)
  depth_limit: null

  # No page limit (scrape all documentation)
  max_pages: null

  # Rate limiting (be respectful to ReadTheDocs)
  delay_between_requests: 0.5

  # Concurrency settings
  global_concurrent_requests: 8
  per_domain_concurrent_requests: 2

  # Retry settings
  max_retries: 3
  retry_backoff: 2.0

  # Respect robots.txt
  respect_robots_txt: true

  # Default link selector
  link_selectors:
    - a[href]

# Output configuration
output:
  # Base output directory
  base_dir: output

  # Site-specific subdirectory
  site_dir: requests

  # Directory structure
  structure:
    docs_dir: docs
    assets_dir: assets

  # Path mapping: URL to file path conversion
  path_mapping:
    mode: auto
    strip_prefix: /en/latest
    index_file: index.md

  # Markdown generation settings
  markdown:
    add_frontmatter: true
    frontmatter_fields:
      - title
      - url
      - scraped_at

# Asset handling
assets:
  # Enable asset downloads
  download: true

  # Asset types to download
  types:
    - images
    - css
    - js

  # Rewrite asset paths to relative paths
  rewrite_paths: true
