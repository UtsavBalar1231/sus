# Peewee ORM Documentation Scraper Configuration
# Medium-large documentation site (~60-100 pages) - deep content test

# Project metadata
name: peewee-docs
description: Peewee ORM documentation scraper

# Site configuration
site:
  # Starting URL for the crawl
  start_urls:
    - https://docs.peewee-orm.com/en/latest/

  # Allowed domains
  allowed_domains:
    - docs.peewee-orm.com

# Crawling rules and behavior
crawling:
  # Only follow links in the latest version
  include_patterns:
    - pattern: "/en/latest/"
      type: prefix

  # Exclude other versions and build artifacts
  exclude_patterns:
    - pattern: "/en/2."
      type: prefix
    - pattern: "/en/3.1"
      type: prefix
    - pattern: "/_static/"
      type: prefix
    - pattern: "/_sources/"
      type: prefix
    - pattern: "/search/"
      type: prefix
    - pattern: "/genindex/"
      type: prefix
    - pattern: "/py-modindex/"
      type: prefix
    - pattern: "*.pdf"
      type: glob
    - pattern: "*.zip"
      type: glob

  # No depth limit (crawl entire doc tree including playhouse extensions)
  depth_limit: null

  # No page limit (scrape all documentation)
  max_pages: null

  # Rate limiting (be respectful to ReadTheDocs)
  delay_between_requests: 0.5

  # Concurrency settings
  global_concurrent_requests: 8
  per_domain_concurrent_requests: 2

  # Retry settings
  max_retries: 3
  retry_backoff: 2.0

  # Respect robots.txt
  respect_robots_txt: true

  # Default link selector
  link_selectors:
    - a[href]

# Output configuration
output:
  # Base output directory
  base_dir: output

  # Site-specific subdirectory
  site_dir: peewee

  # Directory structure
  structure:
    docs_dir: docs
    assets_dir: assets

  # Path mapping: URL to file path conversion
  path_mapping:
    mode: auto
    strip_prefix: /en/latest
    index_file: index.md

  # Markdown generation settings
  markdown:
    add_frontmatter: true
    frontmatter_fields:
      - title
      - url
      - scraped_at

# Asset handling
assets:
  # Enable asset downloads
  download: true

  # Asset types to download
  types:
    - image
    - css
    - javascript

  # Rewrite asset paths to relative paths
  rewrite_paths: true
